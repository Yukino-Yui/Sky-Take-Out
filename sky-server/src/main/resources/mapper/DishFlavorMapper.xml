<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sky.mapper.DishFlavorMapper">

    <!--批量插入新增菜品相关口味-->
    <insert id="insertBatch">
        insert into dish_flavor (dish_id, name, value) VALUES
        <!--动态sql遍历，要用标签<foreach>,每次遍历获取当前DishFlavor对象-->
        <!--collection绑定到传入的list 参数名，item循环时的临时变量，separator每个item之间的分隔符(批量插入就是逗号) -->
        <foreach collection="flavors" item="df" separator=",">
            (#{df.dishId},#{df.name},#{df.value})
        </foreach>
    </insert>

    <!--根据菜品id批量删除相关联的口味-->
    <delete id="deleteBatch">
        delete from dish_flavor where dish_id in
        <foreach collection="DishIds" open="(" close=")" separator="," item="dishId">
            #{dishId}
        </foreach>
    </delete>

    <!--resultType：单条结果的类型,这里其实不用动态查询的，可以直接用注解的方式查询-->
    <!--#{} 里用的是 Java 参数名，但 SQL 里必须用数据库字段名-->
    <select id="getByDishId" resultType="com.sky.entity.DishFlavor">
        select * from dish_flavor where dish_id = #{dishId}
    </select>

</mapper>
